<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sorted Football Points Table</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-bottom: 20px; }
    th, td { border: 1px solid #999; padding: 8px; text-align: center; }
    th { background-color: #f2f2f2; }
    td[contenteditable] { background-color: #fff9dc; }
    input[type="number"] { width: 50px; }
    button { padding: 5px 10px; }
  </style>
</head>
<body>

<h2>Match Results (Update One-by-One)</h2>
<table id="resultsTable">
  <thead>
    <tr>
      <th contenteditable="true">Team A</th>
      <th>Score A</th>
      <th>Score B</th>
      <th contenteditable="true">Team B</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr><td contenteditable="true">Team 1</td><td><input type="number"/></td><td><input type="number"/></td><td contenteditable="true">Team 2</td><td><button onclick="updateMatch(this)">Update</button></td></tr>
    <tr><td contenteditable="true">Team 1</td><td><input type="number"/></td><td><input type="number"/></td><td contenteditable="true">Team 3</td><td><button onclick="updateMatch(this)">Update</button></td></tr>
    <tr><td contenteditable="true">Team 1</td><td><input type="number"/></td><td><input type="number"/></td><td contenteditable="true">Team 4</td><td><button onclick="updateMatch(this)">Update</button></td></tr>
    <tr><td contenteditable="true">Team 2</td><td><input type="number"/></td><td><input type="number"/></td><td contenteditable="true">Team 3</td><td><button onclick="updateMatch(this)">Update</button></td></tr>
    <tr><td contenteditable="true">Team 2</td><td><input type="number"/></td><td><input type="number"/></td><td contenteditable="true">Team 4</td><td><button onclick="updateMatch(this)">Update</button></td></tr>
    <tr><td contenteditable="true">Team 3</td><td><input type="number"/></td><td><input type="number"/></td><td contenteditable="true">Team 4</td><td><button onclick="updateMatch(this)">Update</button></td></tr>
  </tbody>
</table>

<h2>Points Table (Sorted by Points)</h2>
<table id="pointsTable">
  <thead>
    <tr>
      <th contenteditable="true">Team</th>
      <th contenteditable="true">Played</th>
      <th contenteditable="true">Won</th>
      <th contenteditable="true">Draw</th>
      <th contenteditable="true">Lost</th>
      <th contenteditable="true">Points</th>
    </tr>
  </thead>
  <tbody>
    <tr><td contenteditable="true">Team 1</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td></tr>
    <tr><td contenteditable="true">Team 2</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td></tr>
    <tr><td contenteditable="true">Team 3</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td></tr>
    <tr><td contenteditable="true">Team 4</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td><td contenteditable="true">0</td></tr>
  </tbody>
</table>

<script>
  const resultsTable = document.getElementById("resultsTable");
  const pointsTable = document.getElementById("pointsTable");

  function updateMatch(button) {
    const row = button.closest("tr");
    const teamA = row.cells[0].innerText.trim();
    const teamB = row.cells[3].innerText.trim();
    const scoreA = parseInt(row.cells[1].querySelector("input").value);
    const scoreB = parseInt(row.cells[2].querySelector("input").value);

    if (isNaN(scoreA) || isNaN(scoreB)) {
      alert("Please enter valid scores.");
      return;
    }

    const tableRows = pointsTable.querySelectorAll("tbody tr");

    const getTeamRow = (team) => {
      for (let r of tableRows) {
        if (r.cells[0].innerText.trim() === team) return r;
      }
      const newRow = pointsTable.insertRow();
      for (let i = 0; i < 6; i++) {
        const cell = newRow.insertCell();
        cell.contentEditable = true;
        cell.innerText = i === 0 ? team : "0";
      }
      return newRow;
    };

    const rowA = getTeamRow(teamA);
    const rowB = getTeamRow(teamB);

    const updateStat = (cell, val) => {
      cell.innerText = (parseInt(cell.innerText) || 0) + val;
    };

    updateStat(rowA.cells[1], 1); // Played
    updateStat(rowB.cells[1], 1);

    if (scoreA > scoreB) {
      updateStat(rowA.cells[2], 1); // Win
      updateStat(rowB.cells[4], 1); // Loss
      updateStat(rowA.cells[5], 3); // Points
    } else if (scoreB > scoreA) {
      updateStat(rowB.cells[2], 1);
      updateStat(rowA.cells[4], 1);
      updateStat(rowB.cells[5], 3);
    } else {
      updateStat(rowA.cells[3], 1); // Draw
      updateStat(rowB.cells[3], 1);
      updateStat(rowA.cells[5], 1);
      updateStat(rowB.cells[5], 1);
    }

    button.disabled = true;
    sortPointsTable();
    saveAllData();
  }

  function sortPointsTable() {
    const rows = Array.from(pointsTable.querySelectorAll("tbody tr"));
    rows.sort((a, b) => {
      const pointsA = parseInt(a.cells[5].innerText) || 0;
      const pointsB = parseInt(b.cells[5].innerText) || 0;
      return pointsB - pointsA;
    });

    const tbody = pointsTable.querySelector("tbody");
    rows.forEach(row => tbody.appendChild(row)); // Reorder rows
  }

  function saveAllData() {
    localStorage.setItem("resultsTable", resultsTable.innerHTML);
    localStorage.setItem("pointsTable", pointsTable.innerHTML);
  }

  function loadAllData() {
    if (localStorage.getItem("resultsTable")) {
      resultsTable.innerHTML = localStorage.getItem("resultsTable");
      rebindButtons();
    }
    if (localStorage.getItem("pointsTable")) {
      pointsTable.innerHTML = localStorage.getItem("pointsTable");
      sortPointsTable(); // Sort after load
    }
  }

  function rebindButtons() {
    const buttons = document.querySelectorAll("#resultsTable button");
    buttons.forEach(btn => {
      btn.onclick = function () {
        updateMatch(btn);
      };
    });
  }

  function autoSaveOnEdit(table) {
    table.addEventListener("input", () => {
      sortPointsTable();
      saveAllData();
    });
  }

  loadAllData();
  autoSaveOnEdit(resultsTable);
  autoSaveOnEdit(pointsTable);
</script>

</body>
</html>
